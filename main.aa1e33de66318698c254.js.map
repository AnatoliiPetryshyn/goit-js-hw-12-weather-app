{"version":3,"sources":["webpack:///./js/getGeoPosition.js","webpack:///./js/fetchWeather.js","webpack:///./js/app.js","webpack:///./templates/currentWeatherTemplates.hbs"],"names":["getCurrentPosition","Promise","resolve","reject","navigator","geolocation","minimumAge","baseUrl","apiKey","currentweather","fetchWeather","query","fetch","then","response","ok","json","Error","statusText","PNotify","defaults","styling","icons","getGeoPosition","position","coords","latitude","longitude","error","refs","searchForm","document","querySelector","weatherSection","value","currentWeather","markup","currentWeatherTemplate","currentWeatherMarkup","innerHTML","insertAdjacentHTML","classList","remove","addEventListener","e","preventDefault","currentTarget","elements","city","reset","Handlebars","__webpack_require__","module","exports","template","compiler","main","container","depth0","helpers","partials","data","stack1","alias1","lambda","alias2","escapeExpression","current","condition","icon","text","location","name","temp_c","humidity","wind_kph","useData"],"mappings":"yIASeA,iCATY,WACzB,OAAO,IAAIC,QAAQ,SAACC,EAASC,GAI3BC,UAAUC,YAAYL,mBAAmBE,EAASC,EAHlC,CACdG,WAAY,SCHZC,EAAU,2BACVC,EAAS,sCACTC,EAAiB,gBAYRC,MAVf,SAAsBC,GAEpB,OAAOC,MAAML,EAAUE,EAAiBD,EADxB,MAASG,GACoCE,KAC3D,SAAAC,GACE,GAAIA,EAASC,GAAI,OAAOD,EAASE,OACjC,MAAM,IAAIC,MAAMH,EAASI,oCCF/BC,IAAQC,SAASC,QAAU,WAE3BF,IAAQC,SAASE,MAAQ,WAEzBC,IACGV,KAAK,SAAAW,GAEJZ,EADkBY,EAASC,OAAOC,SAAtB,IAAkCF,EAASC,OAAOE,aAFlE,MAKS,SAAAC,GAAK,OACVT,IAAQS,MACN,uEAIN,IAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,eAAgBF,SAASC,cAAc,aAkBzC,SAASpB,EAAMsB,GACbxB,EAAawB,GACVrB,KAAK,SAAAsB,GACJ,IAAMC,EAPZ,SAA8BD,GAC5B,OAAOE,IAAuBF,GAMXG,CAAqBH,GACpCN,EAAKI,eAAeM,UAAY,GAChCV,EAAKI,eAAeO,mBAAmB,YAAaJ,KAJxD,MAMS,SAAAR,GAAK,OAAIT,IAAQS,MAAR,GAAiBA,KAEnCC,EAAKI,eAAeQ,UAAUC,OAAO,aAxBvCb,EAAKC,WAAWa,iBAAiB,SAEjC,SAA2BC,GACzBA,EAAEC,iBAGFjC,EADmBgC,EAAEE,cAAcC,SAASC,KAAKd,OAGjDU,EAAEE,cAAcG,0CCnClB,IAAAC,EAAiBC,EAAQ,QAEzBC,EAAAC,SAAAH,EAAA,SAAAA,GAAAI,SAAA,CAAiEC,SAAA,eAAAC,KAAA,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACjE,IAAAC,EAAAC,EAAAN,EAAAO,OAAAC,EAAAR,EAAAS,iBAEA,sCACAD,EAAAF,EAAA,OAAAD,EAAA,OAAAA,EAAA,MAAAJ,IAAAS,QAAAT,GAAAI,EAAAM,UAAAN,KAAAO,KAAAP,EAAAJ,IACA,UACAO,EAAAF,EAAA,OAAAD,EAAA,OAAAA,EAAA,MAAAJ,IAAAS,QAAAT,GAAAI,EAAAM,UAAAN,KAAAQ,KAAAR,EAAAJ,IACA,gFACAO,EAAAF,EAAA,OAAAD,EAAA,MAAAJ,IAAAa,SAAAb,GAAAI,EAAAU,KAAAV,EAAAJ,IACA,sFACAO,EAAAF,EAAA,OAAAD,EAAA,MAAAJ,IAAAS,QAAAT,GAAAI,EAAAW,OAAAX,EAAAJ,IACA,+FACAO,EAAAF,EAAA,OAAAD,EAAA,MAAAJ,IAAAS,QAAAT,GAAAI,EAAAY,SAAAZ,EAAAJ,IACA,iFACAO,EAAAF,EAAA,OAAAD,EAAA,MAAAJ,IAAAS,QAAAT,GAAAI,EAAAa,SAAAb,EAAAJ,IACA,+FACAO,EAAAF,EAAA,OAAAD,EAAA,OAAAA,EAAA,MAAAJ,IAAAS,QAAAT,GAAAI,EAAAM,UAAAN,KAAAQ,KAAAR,EAAAJ,IACA,eACCkB,SAAA","file":"main.aa1e33de66318698c254.js","sourcesContent":["const getCurrentPosition = () => {\r\n  return new Promise((resolve, reject) => {\r\n    const options = {\r\n      minimumAge: 30,\r\n    };\r\n    navigator.geolocation.getCurrentPosition(resolve, reject, options);\r\n  });\r\n};\r\n\r\nexport default getCurrentPosition;\r\n","const baseUrl = 'http://api.apixu.com/v1/';\r\nconst apiKey = 'key=3cb596775cee4eedbcf112350191407';\r\nconst currentweather = 'current.json?';\r\n\r\nfunction fetchWeather(query) {\r\n  const queryParam = `&q=${query}`;\r\n  return fetch(baseUrl + currentweather + apiKey + queryParam).then(\r\n    response => {\r\n      if (response.ok) return response.json();\r\n      throw new Error(response.statusText);\r\n    },\r\n  );\r\n}\r\n\r\nexport default fetchWeather;\r\n","import PNotify from 'pnotify/dist/es/PNotify.js';\r\nimport 'pnotify/dist/es/PNotifyStyleMaterial.js';\r\nimport getGeoPosition from './getGeoPosition';\r\nimport fetchWeather from './fetchWeather';\r\nimport currentWeatherTemplate from '../templates/currentWeatherTemplates.hbs';\r\n\r\n// Set default styling.\r\nPNotify.defaults.styling = 'material';\r\n// This icon setting requires the Material Icons font. (See below.)\r\nPNotify.defaults.icons = 'material';\r\n\r\ngetGeoPosition()\r\n  .then(position => {\r\n    const coords = `${position.coords.latitude},${position.coords.longitude}`;\r\n    fetch(coords);\r\n  })\r\n  .catch(error =>\r\n    PNotify.error(\r\n      'Нет прав доступа к геопозиции, используйте поиск по имени города.',\r\n    ),\r\n  );\r\n\r\nconst refs = {\r\n  searchForm: document.querySelector('#search-form'),\r\n  weatherSection: document.querySelector('#weather'),\r\n};\r\n\r\nrefs.searchForm.addEventListener('submit', submitFormHandler);\r\n\r\nfunction submitFormHandler(e) {\r\n  e.preventDefault();\r\n\r\n  const inputValue = e.currentTarget.elements.city.value;\r\n  fetch(inputValue);\r\n\r\n  e.currentTarget.reset();\r\n}\r\n\r\nfunction currentWeatherMarkup(currentWeather) {\r\n  return currentWeatherTemplate(currentWeather);\r\n}\r\n\r\nfunction fetch(value) {\r\n  fetchWeather(value)\r\n    .then(currentWeather => {\r\n      const markup = currentWeatherMarkup(currentWeather);\r\n      refs.weatherSection.innerHTML = '';\r\n      refs.weatherSection.insertAdjacentHTML('beforeend', markup);\r\n    })\r\n    .catch(error => PNotify.error(`${error}`));\r\n\r\n  refs.weatherSection.classList.remove('is-hidden');\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"<img class=\\\"icon\\\" src=\\\"https:\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? depth0.current : depth0)) != null ? stack1.condition : stack1)) != null ? stack1.icon : stack1), depth0))\n    + \"\\\" alt=\\\"\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? depth0.current : depth0)) != null ? stack1.condition : stack1)) != null ? stack1.text : stack1), depth0))\n    + \"\\\" />\\r\\n<p class=\\\"weather__parameters\\\">Location: <span data-field=\\\"location\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.location : depth0)) != null ? stack1.name : stack1), depth0))\n    + \"</span></p>\\r\\n<p class=\\\"weather__parameters\\\">Temperature: <span data-field=\\\"temp\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.current : depth0)) != null ? stack1.temp_c : stack1), depth0))\n    + \" &#8451;</span></p>\\r\\n<p class=\\\"weather__parameters\\\">Humidity: <span data-field=\\\"humidity\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.current : depth0)) != null ? stack1.humidity : stack1), depth0))\n    + \" %</span></p>\\r\\n<p class=\\\"weather__parameters\\\">Wind: <span data-field=\\\"wind\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.current : depth0)) != null ? stack1.wind_kph : stack1), depth0))\n    + \" kph</span></p>\\r\\n<p class=\\\"weather__parameters\\\">Conditions: <span data-field=\\\"conditions\\\">\"\n    + alias2(alias1(((stack1 = ((stack1 = (depth0 != null ? depth0.current : depth0)) != null ? stack1.condition : stack1)) != null ? stack1.text : stack1), depth0))\n    + \"</span></p>\";\n},\"useData\":true});"],"sourceRoot":""}